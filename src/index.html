<html>
<head>
    <title> OC Robot - Blockly</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script src="js/lib/blockly_compressed.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/lib/blocks_compressed.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/lib/lua_compressed.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/move-blocks.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/lib/msg/en.js" type="text/javascript" charset="utf-8"></script>

    <link rel="stylesheet" type="text/css" href="css/main.css">
</head>
<body>

<xml id="toolbox" style="display: none">
    <block type="controls_if"></block>
    <block type="controls_repeat_ext"></block>
    <block type="logic_compare"></block>
    <block type="math_number"></block>
    <block type="math_arithmetic"></block>
    <block type="text"></block>
    <block type="text_print"></block>
</xml>


<div id="blocklyDiv"></div>
<div id="editorDiv"></div>

<script src="js/lib/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editorDiv");
    editor.setTheme("ace/theme/ambiance");
    editor.getSession().setMode("ace/mode/lua");

    var workspace = Blockly.inject('blocklyDiv', {toolbox: document.getElementById('toolbox')});
    function myUpdateFunction(event) {
        var code = Blockly.Lua.workspaceToCode(workspace);
        editor.setValue(code);
    }
    workspace.addChangeListener(myUpdateFunction);
</script>
</body>
</html>